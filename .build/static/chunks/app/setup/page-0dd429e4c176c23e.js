(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[413],{9963:function(e,s,r){Promise.resolve().then(r.bind(r,9774))},9774:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return S}});var a=r(7437),i=r(2265),t=r(9376),n=r(8989);r(5566),r(2957).Buffer;var d=r(2869),o=r(5186),l=r(6815),c=r(4508);let u=i.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,c.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));u.displayName="Card";let h=i.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,c.cn)("flex flex-col space-y-1.5 p-6",e),...s}));h.displayName="CardHeader";let p=i.forwardRef(({className:e,...s},r)=>(0,a.jsx)("h3",{ref:r,className:(0,c.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));p.displayName="CardTitle";let m=i.forwardRef(({className:e,...s},r)=>(0,a.jsx)("p",{ref:r,className:(0,c.cn)("text-sm text-muted-foreground",e),...s}));m.displayName="CardDescription";let f=i.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,c.cn)("p-6 pt-0",e),...s}));f.displayName="CardContent",i.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,c.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter";var x=r(271);let g=x.fC,y=i.forwardRef(({className:e,...s},r)=>(0,a.jsx)(x.aV,{ref:r,className:(0,c.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));y.displayName=x.aV.displayName;let v=i.forwardRef(({className:e,...s},r)=>(0,a.jsx)(x.xz,{ref:r,className:(0,c.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));v.displayName=x.xz.displayName;let j=i.forwardRef(({className:e,...s},r)=>(0,a.jsx)(x.VY,{ref:r,className:(0,c.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));j.displayName=x.VY.displayName;var b=r(2241),w=r(519);let N=i.forwardRef(({className:e,...s},r)=>(0,a.jsx)(b.fC,{className:(0,c.cn)("grid gap-2",e),...s,ref:r}));N.displayName=b.fC.displayName;let C=i.forwardRef(({className:e,...s},r)=>(0,a.jsx)(b.ck,{ref:r,className:(0,c.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...s,children:(0,a.jsx)(b.z$,{className:"flex items-center justify-center",children:(0,a.jsx)(w.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})}));C.displayName=b.ck.displayName;var k=r(4438);function S(){(0,t.useRouter)();let[e,s]=(0,i.useState)(!1),[r,c]=(0,i.useState)("site"),[x,b]=(0,i.useState)({key:"",name:"",timezone:"UTC",publisher:"wordpress",locales:["en"]}),[w,S]=(0,i.useState)({searchProvider:"CSE"}),[P,I]=(0,i.useState)([]),[_,T]=(0,i.useState)(null),A=async()=>{if(!x.key||!x.name){k.Am.error("Site key and name are required");return}s(!0);try{if(!(await fetch("/api/sites",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)})).ok)throw Error("Failed to create site");k.Am.success("Site created successfully"),c("connectors")}catch(e){k.Am.error("Failed to create site")}finally{s(!1)}},F=async()=>{s(!0);let e=[];try{w.openai?.apiKey&&(await fetch("/api/setup/secrets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({kind:"openai",data:w.openai})})).ok&&e.push("OpenAI"),"CSE"===w.searchProvider&&w.searchCse?.id&&w.searchCse?.key&&(await fetch("/api/setup/secrets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({kind:"search_cse",data:w.searchCse})})).ok&&e.push("Google CSE"),"BING"===w.searchProvider&&w.searchBing?.key&&(await fetch("/api/setup/secrets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({kind:"search_bing",data:w.searchBing})})).ok&&e.push("Bing Search"),w.wordpress?.baseUrl&&w.wordpress?.user&&w.wordpress?.appPassword&&(await fetch("/api/setup/secrets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({kind:`wp_${x.key}`,data:w.wordpress})})).ok&&e.push("WordPress"),w.apiToken&&(await fetch("/api/setup/secrets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({kind:"console_api_token",data:{token:w.apiToken}})})).ok&&e.push("API Token"),I(e),k.Am.success(`Saved ${e.length} secrets`),c("github")}catch(e){k.Am.error("Failed to save secrets")}finally{s(!1)}},O=async()=>{s(!0);try{let e=await fetch("/api/setup/github-secrets",{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to write to GitHub");let s=await e.json();T(s),k.Am.success(`Wrote ${s.written} secrets to GitHub`)}catch(e){k.Am.error("Failed to write secrets to GitHub")}finally{s(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Setup Wizard"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Configure your Orion Content system"})]}),(0,a.jsxs)(g,{value:r,onValueChange:c,className:"w-full",children:[(0,a.jsxs)(y,{className:"grid w-full grid-cols-3",children:[(0,a.jsx)(v,{value:"site",children:"Site Setup"}),(0,a.jsx)(v,{value:"connectors",children:"Connectors"}),(0,a.jsx)(v,{value:"github",children:"GitHub Secrets"})]}),(0,a.jsx)(j,{value:"site",className:"space-y-4",children:(0,a.jsxs)(u,{children:[(0,a.jsxs)(h,{children:[(0,a.jsx)(p,{children:"Create Your First Site"}),(0,a.jsx)(m,{children:"Set up your primary content site configuration"})]}),(0,a.jsxs)(f,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(l._,{htmlFor:"siteKey",children:"Site Key"}),(0,a.jsx)(o.I,{id:"siteKey",placeholder:"e.g., main",value:x.key,onChange:e=>b(s=>({...s,key:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l._,{htmlFor:"siteName",children:"Site Name"}),(0,a.jsx)(o.I,{id:"siteName",placeholder:"e.g., My Content Site",value:x.name,onChange:e=>b(s=>({...s,name:e.target.value}))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(l._,{htmlFor:"timezone",children:"Timezone"}),(0,a.jsx)(o.I,{id:"timezone",value:x.timezone,onChange:e=>b(s=>({...s,timezone:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l._,{htmlFor:"publisher",children:"Publisher"}),(0,a.jsx)(o.I,{id:"publisher",value:x.publisher,onChange:e=>b(s=>({...s,publisher:e.target.value}))})]})]}),(0,a.jsx)(d.z,{onClick:A,disabled:e,children:e?"Creating...":"Create Site"})]})]})}),(0,a.jsx)(j,{value:"connectors",className:"space-y-4",children:(0,a.jsxs)(u,{children:[(0,a.jsxs)(h,{children:[(0,a.jsx)(p,{children:"Configure Connectors"}),(0,a.jsx)(m,{children:"Set up your API keys and connections"})]}),(0,a.jsxs)(f,{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(l._,{htmlFor:"openaiKey",children:"OpenAI API Key"}),(0,a.jsx)(o.I,{id:"openaiKey",type:"password",placeholder:"sk-...",value:w.openai?.apiKey||"",onChange:e=>S(s=>({...s,openai:{apiKey:e.target.value}}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l._,{children:"Search Provider"}),(0,a.jsxs)(N,{value:w.searchProvider,onValueChange:e=>S(s=>({...s,searchProvider:e})),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(C,{value:"CSE",id:"cse"}),(0,a.jsx)(l._,{htmlFor:"cse",children:"Google Custom Search Engine"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(C,{value:"BING",id:"bing"}),(0,a.jsx)(l._,{htmlFor:"bing",children:"Bing Web Search"})]})]})]}),"CSE"===w.searchProvider&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(l._,{htmlFor:"cseId",children:"CSE ID"}),(0,a.jsx)(o.I,{id:"cseId",placeholder:"Custom Search Engine ID",value:w.searchCse?.id||"",onChange:e=>S(s=>({...s,searchCse:{...s.searchCse,id:e.target.value,key:s.searchCse?.key||""}}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l._,{htmlFor:"cseKey",children:"CSE API Key"}),(0,a.jsx)(o.I,{id:"cseKey",type:"password",placeholder:"API Key",value:w.searchCse?.key||"",onChange:e=>S(s=>({...s,searchCse:{...s.searchCse,key:e.target.value,id:s.searchCse?.id||""}}))})]})]}),"BING"===w.searchProvider&&(0,a.jsxs)("div",{children:[(0,a.jsx)(l._,{htmlFor:"bingKey",children:"Bing Search Key"}),(0,a.jsx)(o.I,{id:"bingKey",type:"password",placeholder:"Bing Web Search API Key",value:w.searchBing?.key||"",onChange:e=>S(s=>({...s,searchBing:{key:e.target.value}}))})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"WordPress Connection"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l._,{htmlFor:"wpBaseUrl",children:"WordPress Base URL"}),(0,a.jsx)(o.I,{id:"wpBaseUrl",placeholder:"https://yoursite.com",value:w.wordpress?.baseUrl||"",onChange:e=>S(s=>({...s,wordpress:{...s.wordpress,baseUrl:e.target.value,user:s.wordpress?.user||"",appPassword:s.wordpress?.appPassword||""}}))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(l._,{htmlFor:"wpUser",children:"Username"}),(0,a.jsx)(o.I,{id:"wpUser",placeholder:"WordPress username",value:w.wordpress?.user||"",onChange:e=>S(s=>({...s,wordpress:{...s.wordpress,user:e.target.value,baseUrl:s.wordpress?.baseUrl||"",appPassword:s.wordpress?.appPassword||""}}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l._,{htmlFor:"wpPassword",children:"App Password"}),(0,a.jsx)(o.I,{id:"wpPassword",type:"password",placeholder:"WordPress App Password",value:w.wordpress?.appPassword||"",onChange:e=>S(s=>({...s,wordpress:{...s.wordpress,appPassword:e.target.value,baseUrl:s.wordpress?.baseUrl||"",user:s.wordpress?.user||""}}))})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Console API Token"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Generate a token for pipeline access"})]}),(0,a.jsx)(d.z,{onClick:()=>{let e=(0,n.randomBytes)(32).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");S(s=>({...s,apiToken:e})),k.Am.success("API token generated")},variant:"outline",children:"Generate Token"})]}),w.apiToken&&(0,a.jsx)("div",{className:"p-3 bg-gray-50 rounded-md",children:(0,a.jsx)("code",{className:"text-sm font-mono",children:w.apiToken})})]}),(0,a.jsx)(d.z,{onClick:F,disabled:e,children:e?"Saving...":"Save Secrets (Encrypted)"})]})]})}),(0,a.jsx)(j,{value:"github",className:"space-y-4",children:(0,a.jsxs)(u,{children:[(0,a.jsxs)(h,{children:[(0,a.jsx)(p,{children:"GitHub Secrets"}),(0,a.jsx)(m,{children:"Write your secrets to GitHub Actions for pipeline access"})]}),(0,a.jsxs)(f,{className:"space-y-4",children:[P.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium mb-2",children:"Saved Secrets:"}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1",children:P.map(e=>(0,a.jsx)("li",{className:"text-sm text-gray-600",children:e},e))})]}),(0,a.jsx)(d.z,{onClick:O,disabled:e||0===P.length,children:e?"Writing...":"Write to GitHub Secrets"}),_&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-green-50 rounded-md",children:[(0,a.jsxs)("h3",{className:"font-medium text-green-800",children:["Successfully wrote ",_.written," secrets:"]}),(0,a.jsx)("ul",{className:"mt-2 list-disc list-inside text-sm text-green-700",children:_.names.map(e=>(0,a.jsx)("li",{children:e},e))})]})]})]})})]})]})})}},2869:function(e,s,r){"use strict";r.d(s,{z:function(){return l}});var a=r(7437),i=r(2265),t=r(7053),n=r(7712),d=r(4508);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=i.forwardRef(({className:e,variant:s,size:r,asChild:i=!1,...n},l)=>{let c=i?t.g7:"button";return(0,a.jsx)(c,{className:(0,d.cn)(o({variant:s,size:r,className:e})),ref:l,...n})});l.displayName="Button"},5186:function(e,s,r){"use strict";r.d(s,{I:function(){return n}});var a=r(7437),i=r(2265),t=r(4508);let n=i.forwardRef(({className:e,type:s,...r},i)=>(0,a.jsx)("input",{type:s,className:(0,t.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...r}));n.displayName="Input"},6815:function(e,s,r){"use strict";r.d(s,{_:function(){return l}});var a=r(7437),i=r(2265),t=r(6394),n=r(7712),d=r(4508);let o=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=i.forwardRef(({className:e,...s},r)=>(0,a.jsx)(t.f,{ref:r,className:(0,d.cn)(o(),e),...s}));l.displayName=t.f.displayName},4508:function(e,s,r){"use strict";r.d(s,{cn:function(){return t}});var a=r(1994),i=r(3335);function t(...e){return(0,i.m6)((0,a.W)(e))}}},function(e){e.O(0,[218,628,438,801,546,971,117,744],function(){return e(e.s=9963)}),_N_E=e.O()}]);