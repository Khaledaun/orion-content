(()=>{var e={};e.id=204,e.ids=[204],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},67096:e=>{"use strict";e.exports=require("bcrypt")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},86624:e=>{"use strict";e.exports=require("querystring")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},6005:e=>{"use strict";e.exports=require("node:crypto")},63713:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),t(57319),t(50856),t(35866);var r=t(23191),i=t(88716),a=t(37922),l=t.n(a),n=t(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let c=["",{children:["sites",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,57319)),"/home/ubuntu/orion-content/app/sites/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,50856)),"/home/ubuntu/orion-content/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/home/ubuntu/orion-content/app/sites/page.tsx"],u="/sites/page",x={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/sites/page",pathname:"/sites",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3312:(e,s,t)=>{Promise.resolve().then(t.bind(t,3401)),Promise.resolve().then(t.t.bind(t,79404,23))},3401:(e,s,t)=>{"use strict";t.d(s,{default:()=>d});var r=t(10326),i=t(17577),a=t(35047),l=t(90772),n=t(54432),o=t(45842),c=t(85999);function d(){let[e,s]=(0,i.useState)(""),[t,d]=(0,i.useState)(""),[u,x]=(0,i.useState)("UTC"),[p,m]=(0,i.useState)(""),[h,g]=(0,i.useState)(!1),j=(0,a.useRouter)(),f=async r=>{r.preventDefault(),g(!0);try{let r=await fetch("/api/sites",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,key:t,timezone:u,publisher:p||null})}),i=await r.json();r.ok?(c.Am.success("Site created successfully"),s(""),d(""),x("UTC"),m(""),j.refresh()):c.Am.error(i.error||"Failed to create site")}catch(e){c.Am.error("Failed to create site")}finally{g(!1)}};return(0,r.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx(o._,{htmlFor:"name",children:"Site Name"}),r.jsx(n.I,{id:"name",required:!0,value:e,onChange:e=>s(e.target.value),placeholder:"My Content Site"})]}),(0,r.jsxs)("div",{children:[r.jsx(o._,{htmlFor:"key",children:"Site Key"}),r.jsx(n.I,{id:"key",required:!0,value:t,onChange:e=>d(e.target.value),placeholder:"my-content-site"})]}),(0,r.jsxs)("div",{children:[r.jsx(o._,{htmlFor:"timezone",children:"Timezone"}),r.jsx(n.I,{id:"timezone",value:u,onChange:e=>x(e.target.value),placeholder:"UTC"})]}),(0,r.jsxs)("div",{children:[r.jsx(o._,{htmlFor:"publisher",children:"Publisher (Optional)"}),r.jsx(n.I,{id:"publisher",value:p,onChange:e=>m(e.target.value),placeholder:"Publisher Name"})]})]}),r.jsx(l.z,{type:"submit",disabled:h,children:h?"Creating...":"Create Site"})]})}},54432:(e,s,t)=>{"use strict";t.d(s,{I:()=>l});var r=t(10326),i=t(17577),a=t(77863);let l=i.forwardRef(({className:e,type:s,...t},i)=>r.jsx("input",{type:s,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...t}));l.displayName="Input"},45842:(e,s,t)=>{"use strict";t.d(s,{_:()=>d});var r=t(10326),i=t(17577),a=t(45226),l=i.forwardRef((e,s)=>(0,r.jsx)(a.WV.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));l.displayName="Label";var n=t(28671),o=t(77863);let c=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef(({className:e,...s},t)=>r.jsx(l,{ref:t,className:(0,o.cn)(c(),e),...s}));d.displayName=l.displayName},57319:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var r=t(19510),i=t(90455),a=t(72331),l=t(57371),n=t(2946),o=t(46697);let c=(0,t(68570).createProxy)(String.raw`/home/ubuntu/orion-content/app/sites/create-site-form.tsx#default`);var d=t(39755),u=t(77666);async function x(){await (0,i.Iq)();let e=await a._.site.findMany({orderBy:{createdAt:"desc"},include:{_count:{select:{categories:!0,topics:!0}}}});return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("header",{className:"bg-white shadow",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"flex justify-between items-center h-16",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(l.default,{href:"/dashboard",children:(0,r.jsxs)(n.z,{variant:"ghost",size:"sm",children:[r.jsx(d.Z,{className:"mr-2 h-4 w-4"}),"Back to Dashboard"]})}),r.jsx("h1",{className:"ml-4 text-2xl font-bold text-gray-900",children:"Sites"})]})})})}),r.jsx("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[r.jsx("div",{className:"mb-8",children:(0,r.jsxs)(o.Zb,{children:[(0,r.jsxs)(o.Ol,{children:[r.jsx(o.ll,{children:"Create New Site"}),r.jsx(o.SZ,{children:"Add a new content site to your network"})]}),r.jsx(o.aY,{children:r.jsx(c,{})})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:0===e.length?(0,r.jsxs)("div",{className:"col-span-full text-center py-12",children:[r.jsx(u.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No sites"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating your first site."})]}):e.map(e=>(0,r.jsxs)(o.Zb,{className:"hover:shadow-lg transition-shadow",children:[(0,r.jsxs)(o.Ol,{children:[(0,r.jsxs)(o.ll,{className:"flex items-center",children:[r.jsx(u.Z,{className:"mr-2 h-5 w-5"}),e.name]}),(0,r.jsxs)(o.SZ,{children:["Key: ",e.key]})]}),r.jsx(o.aY,{children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Timezone:"})," ",e.timezone]}),e.publisher&&(0,r.jsxs)("div",{className:"text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Publisher:"})," ",e.publisher]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm text-gray-500",children:[(0,r.jsxs)("span",{children:[e._count.categories," categories"]}),(0,r.jsxs)("span",{children:[e._count.topics," topics"]})]})]})})]},e.id))})]})})]})}},39755:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(27162).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},77666:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(27162).Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,70,575,993,321,999,797,492],()=>t(63713));module.exports=r})();